services:
  db:
    image: postgis/postgis:15-3.4
    environment:
      - POSTGRES_DB=life_recorder
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
    ports: ["5432:5432"]
    volumes:
      - ./sql:/docker-entrypoint-initdb.d   # schema.sql 자동 실행
  app:
    build: .
    command: streamlit run app.py --server.port 8501 --server.address 0.0.0.0
    ports: ["8501:8501"]
    env_file: .env
    volumes:
      - ./:/app
    depends_on: [db]
